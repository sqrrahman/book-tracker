<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Library (with backend)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <!-- module entry -->
    <script type="module" src="js/main.js"></script>
  </head>
  <body>
    <div class="page">
      <header class="topbar">
        <h1 class="title">MY LIBRARY</h1>
        <!-- burger icon -->
        <button id="burgerBtn" class="burger-btn" aria-label="Librarian menu">
          &#9776;
        </button>
        <p class="subtitle">Books are stored in GitHub now.</p>
      </header>

      <div class="tabs-row">
        <button class="tab active" data-tab="books">Books</button>
        <button class="tab" data-tab="quotes">Quotes</button>
        <a class="small-link" href="about.html">About</a>
      </div>

      <!-- BOOKS PANEL -->
      <section class="panel active" id="booksPanel">
        <div class="books-list" id="booksList"></div>
      </section>

      <!-- QUOTES PANEL -->
      <section class="panel" id="quotesPanel">
        <p class="empty-text">Quotes not connected to backend yet.</p>
      </section>

      <!-- ============================= -->
      <!-- Rating: pick user (A or N)    -->
      <!-- ============================= -->
      <div class="modal-backdrop" id="rateUserBackdrop">
        <div class="modal modal-huge">
          <h2 id="rateUserBookTitle">Rate this book</h2>
          <p class="small-muted">Who is rating?</p>
          <div class="user-card-row">
            <div class="user-card user-card-big" data-user="A">A</div>
            <div class="user-card user-card-big" data-user="N">N</div>
          </div>
          <div class="modal-actions">
            <button class="btn-secondary" id="cancelRateUserBtn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- ============================= -->
      <!-- Rating: pick number           -->
      <!-- ============================= -->
      <div class="modal-backdrop" id="rateValueBackdrop">
        <div class="modal modal-rate">
          <h2 id="rateModalTitle">Rate this book</h2>
          <p id="rateForUser" class="small-muted"></p>
          <div class="rating-section">
            <div class="shape-row" id="ratingPentagons"></div>
          </div>
          <input type="number" id="ratingInput" min="0" max="10" step="0.5" value="5" />
          <p id="rateMsg" class="small-msg"></p>
          <div class="modal-actions modal-actions-space">
            <button class="btn-secondary" id="cancelRateBtn">Cancel</button>
            <button class="btn-primary" id="okRateBtn">Save</button>
          </div>
        </div>
      </div>

      <!-- ============================= -->
      <!-- Q/W main view                 -->
      <!-- ============================= -->
      <div class="modal-backdrop" id="qwBackdrop">
        <div class="modal modal-qw">
          <div class="modal-qw-header">
            <h2 id="qwTitle">Quotes &amp; Words</h2>
            <button class="btn-primary qw-edit-top" id="qwEditBtn">Edit</button>
          </div>
          <div class="qw-grid">
            <div class="qw-box qw-quotes-a">
              <h3>A – Quotes</h3>
              <ul id="qwQuotesA" class="qw-list"></ul>
            </div>
            <div class="qw-box qw-quotes-n">
              <h3>N – Quotes</h3>
              <ul id="qwQuotesN" class="qw-list"></ul>
            </div>
            <div class="qw-box qw-words-a">
              <h3>A – Words</h3>
              <ul id="qwWordsA" class="qw-list"></ul>
            </div>
            <div class="qw-box qw-words-n">
              <h3>N – Words</h3>
              <ul id="qwWordsN" class="qw-list"></ul>
            </div>
          </div>
        </div>
      </div>

      <!-- ============================= -->
      <!-- Q/W: pick user to edit        -->
      <!-- ============================= -->
      <div class="modal-backdrop" id="qwUserBackdrop">
        <div class="modal modal-huge">
          <h2>Choose user</h2>
          <div class="user-card-row">
            <div class="user-card user-card-big" data-qw-user="A">A</div>
            <div class="user-card user-card-big" data-qw-user="N">N</div>
          </div>
          <div class="modal-actions">
            <button class="btn-secondary" id="qwUserCancelBtn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- ============================= -->
      <!-- Q/W: actual edit inputs       -->
      <!-- ============================= -->
      <div class="modal-backdrop" id="qwEditBackdrop">
        <div class="modal modal-qw-edit">
          <h2 id="qwEditTitle">Edit</h2>
          <p class="small-muted">Press Enter to go to next input. Empty values are ignored.</p>
          <div class="qw-input-grid" id="qwQuotesInputs"></div>
          <div class="qw-input-grid qw-words-grid" id="qwWordsInputs"></div>
          <p id="qwEditMsg" class="small-msg"></p>
          <div class="modal-actions modal-actions-space">
            <button class="btn-secondary" id="qwEditCancelBtn">Cancel</button>
            <button class="btn-primary" id="qwEditSaveBtn">Save</button>
          </div>
        </div>
      </div>

      <!-- ===================================== -->
      <!-- T (Texts) main view                   -->
      <!-- ===================================== -->
      <div class="modal-backdrop" id="txBackdrop">
        <div class="modal modal-tx">
          <div class="modal-tx-header">
            <h2 id="txTitle">Texts</h2>
            <button class="btn-primary tx-edit-top" id="txEditBtn">Edit</button>
          </div>
          <div class="tx-grid">
            <div class="tx-box tx-a-notes">
              <h3>A – Notes</h3>
              <div id="txANotes" class="tx-content"></div>
            </div>
            <div class="tx-box tx-a-comments">
              <h3>A – Comments</h3>
              <div id="txAComments" class="tx-content"></div>
            </div>
            <div class="tx-box tx-n-notes">
              <h3>N – Notes</h3>
              <div id="txNNotes" class="tx-content"></div>
            </div>
            <div class="tx-box tx-n-comments">
              <h3>N – Comments</h3>
              <div id="txNComments" class="tx-content"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- T: pick user to edit -->
      <div class="modal-backdrop" id="txUserBackdrop">
        <div class="modal modal-huge">
          <h2>Choose user</h2>
          <div class="user-card-row">
            <div class="user-card user-card-big" data-tx-user="A">A</div>
            <div class="user-card user-card-big" data-tx-user="N">N</div>
          </div>
          <div class="modal-actions">
            <button class="btn-secondary" id="txUserCancelBtn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- T: actual edit (2 big textareas) -->
      <div class="modal-backdrop" id="txEditBackdrop">
        <div class="modal modal-tx-edit">
          <h2 id="txEditTitle">Edit</h2>
          <p class="small-muted">Empty values are allowed.</p>
          <label class="small-muted" for="txNotesInput">Notes</label>
          <textarea id="txNotesInput" rows="5"></textarea>
          <label class="small-muted" for="txCommentsInput">Comments</label>
          <textarea id="txCommentsInput" rows="5"></textarea>
          <p id="txEditMsg" class="small-msg"></p>
          <div class="modal-actions modal-actions-space">
            <button class="btn-secondary" id="txEditCancelBtn">Cancel</button>
            <button class="btn-primary" id="txEditSaveBtn">Save</button>
          </div>
        </div>
      </div>

      <!-- ===================================== -->
      <!-- Librarian main modal (2x2 buttons)    -->
      <!-- ===================================== -->
      <div class="modal-backdrop" id="librarianBackdrop">
        <div class="modal modal-librarian">
          <h2>Librarian</h2>
          <div class="librarian-grid">
            <button class="librarian-btn add-btn-lite" id="libAddBtn">Add</button>
            <button class="librarian-btn remove-btn-lite" id="libRemoveBtn">Remove</button>
            <button class="librarian-btn rename-btn-lite" id="libRenameBtn">Rename</button>
            <button class="librarian-btn sort-btn-lite" id="libSortBtn">Sort</button>
          </div>
          <div class="modal-actions">
            <button class="btn-secondary" id="libCloseBtn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Add Books modal -->
      <div class="modal-backdrop" id="addBooksBackdrop">
        <div class="modal modal-add-books">
          <h2>Add Books</h2>
          <p class="small-muted">Enter titles (one per line, empty lines ignored):</p>
          <textarea id="addBooksTextarea" rows="10" placeholder="Book 1&#10;Book 2&#10;Book 3"></textarea>
          <div class="modal-actions modal-actions-space">
            <button class="btn-secondary" id="addBooksCancel">Cancel</button>
            <button class="btn-primary" id="addBooksSave">Add</button>
          </div>
          <p id="addBooksMsg" class="small-msg"></p>
        </div>
      </div>

      <!-- Remove Books modal -->
      <div class="modal-backdrop" id="removeBooksBackdrop">
        <div class="modal modal-remove-books">
          <h2>Remove Books</h2>
          <p class="small-muted">Enter book numbers separated by commas:</p>
          <input type="text" id="removeBooksInput" placeholder="e.g. 2,5,6" />
          <div class="modal-actions modal-actions-space">
            <button class="btn-secondary" id="removeBooksCancel">Cancel</button>
            <button class="btn-primary" id="removeBooksNext">Next</button>
          </div>
          <p id="removeBooksMsg" class="small-msg"></p>
        </div>
      </div>

      <!-- Confirm Delete modal -->
      <div class="modal-backdrop" id="confirmDeleteBackdrop">
        <div class="modal modal-confirm-delete">
          <h2>Confirm Deletion</h2>
          <ul id="confirmDeleteList" class="qw-list"></ul>
          <div class="modal-actions modal-actions-space">
            <button class="btn-secondary" id="confirmDeleteCancel">Cancel</button>
            <button class="btn-primary" id="confirmDeleteConfirm">Delete</button>
          </div>
        </div>
      </div>

      <!-- Rename modal -->
      <div class="modal-backdrop" id="renameBackdrop">
        <div class="modal modal-rename">
          <h2>Rename Book</h2>
          <label class="small-muted">Book number:</label>
          <input type="number" id="renameNumber" min="1" placeholder="e.g. 3" />
          <button class="btn-primary" id="renameLoadBtn">Okay</button>
          <div id="renameEditSection" style="display:none; margin-top:10px;">
            <p class="small-muted" id="renameCurrentTitle"></p>
            <input type="text" id="renameNewTitle" placeholder="New title" />
            <div class="modal-actions modal-actions-space">
              <button class="btn-secondary" id="renameCancelBtn">Cancel</button>
              <button class="btn-primary" id="renameSaveBtn">Save</button>
            </div>
            <p id="renameMsg" class="small-msg"></p>
          </div>
        </div>
      </div>

      <!-- Sort modal -->
      <div class="modal-backdrop" id="sortBackdrop">
        <div class="modal modal-sort">
          <h2>Sort</h2>
          <p class="small-muted">Sorting options coming soon.</p>
          <div class="modal-actions">
            <button class="btn-secondary" id="sortCloseBtn">Close</button>
          </div>
        </div>
      </div>

      <footer class="footer">
        <p>Hosted on GitHub Pages · Data stored in GitHub via backend</p>
      </footer>
    </div>
  </body>
</html>
